import { Component,OnInit,AfterViewChecked,OnDestroy,AfterViewInit,NgZone} from '@angular/core';
import { Title }     from '@angular/platform-browser';
import {GridOptions} from "ag-grid-community";
import { HttpClient,HttpHeaders  } from "@angular/common/http";
import { Router } from "@angular/router";
import * as am4core from "@amcharts/amcharts4/core";
import * as am4charts from "@amcharts/amcharts4/charts";

@Component({
    selector: "pie-chart",
    templateUrl:`./piechart.html`,
    styles:[`
       #chartdiv {
           width:100%;
           height:200px;
       }
    `]
  })
  export class PieChartComponent implements OnInit   {

    constructor(){

    }

    ngOnInit() {
        let chart = am4core.create("chartdiv", am4charts.PieChart);
        chart.hiddenState.properties.opacity = 0; // this creates initial fade-in
        
        chart.legend = new am4charts.Legend();
        let data=[{
         id:1,
         name:"Sukhada" 
        },{
          id:2,
          name:"Rand Shweta Kasar" 
        }]
       
        chart.data = [
          {
            country: "Lithuania",
            litres: 501.9,
            id:0
      
          },
          {
            country: "Czech Republic",
            litres: 301.9,
             id:1
          },
         
        ];
        
        let series = chart.series.push(new am4charts.PieSeries());
        series.dataFields.value = "litres";
        series.dataFields.category = "country";
        series.labels.template.adapter.add("hidden", hideSmall);
function hideSmall(hidden, target) {
    console.log(target.dataItem.properties.category);
    return false;
  //return target.dataItem.properties.category=='Lithuania' ? true : false;
}
series.labels.template.tooltipHTML  = ``;

series.tooltip.getFillFromObject = false;

series.tooltip.background.fill = am4core.color("#191970");
series.slices.template.tooltipText = "";


series.labels.template.stroke =am4core.color("#191970");

series.labels.template.wrap  = true;

series.labels.template.strokeLinecap ="butt";
// series.labels.template.html ="<b><panjkaj/b>";

series.slices.template.strokeWidth  = 10;
series.alignLabels = true;

series.labels.template.align   = "left";
series.ticks.template.strokeWidth =5;

series.ticks.template.rotation = 0;
series.ticks.template.length = 50;
series.labels.template.adapter.add("html", function(text, target, key) {

  return "<b>pankaju</b><br>DURVE";
});

series.slices.template.strokeDasharray ="dotted";


series.labels.template.adapter.add("tooltipHTML", function(text, target, key) {
 console.log(target.dataItem.dataContext.id);
  var str='';
  str ="<table style='border:1px solid red'>";
  str +="<tr>";
  str +="<th>";
  str +="FirstName</th>";
  str +="<th>";
  str +="LastName1</th>";
  str +="</tr>";
  //if(target.dataItem.dataContext.id==0) {
    str +="<tr>";
    str +="<td>"+ data[target.dataItem.dataContext.id].id+"</td>";
    str +="<td>"+ data[target.dataItem.dataContext.id].name+"</td>";
    str +="</tr>";
  //}
  str +="</table>";
 console.log(str);
  return str;
 });





 


    }
   


  }
